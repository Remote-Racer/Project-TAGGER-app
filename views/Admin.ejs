<%- include('partials/header') %>
<body>
  <%- include('partials/navbar') %>
  <%- include('partials/player_shared') %>

  <div id="admin">
    <div id="admin-panel">
      <h3>Admin Controls:</h3>
      <div id="round-panel">
        <p>Round Controls</p>
        <p>Choose Round Winner</p>
        <a class="round-button" onclick="winRound(1)">Player 1</a>
        <a class="round-button" onclick="winRound(0)">Player 2</a><br>
      </div><br>
      <div id="lobby-panel">
        <p>Lobby Creation</p>
        <label for="timerSelect">Round Length:</label>
        <select name="timerSelect" id="timerSelect">
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="20">20</option>
          <option value="30">30</option>
          <option value="3600">TESTING</option>
        </select>
        <br><a onclick="createLobby()">Create</a><br>
      </div>
      <!-- <a onclick="pauseGame()">PAUSE</a><br> -->
    </div>
  </div>
</body>

<script src="/socket.io/socket.io.js"></script>
<script>const socket = io();</script>
<script src="/scripts/frontend/player_shared.js" defer></script>
<script>
  //Initiates round end with passed player value
  function winRound(player){
    socket.emit('winRound', [lobby, player]);
  }

  //Queues server to create a new lobby
  function createLobby(){
    socket.emit('createLobby', document.getElementById('timerSelect').value);
  }

  //Sends a request to server to join lobby at the specified id
  function joinGame(id){
    socket.emit('joinAdmin', id);
  }

  function leave(){
    socket.emit('leaveAdmin');
    document.getElementById('lobby-menu').style.display = 'initial';
    document.getElementById('game-menu').style.display = 'none';
    playerList.innerHTML = '';
    lobby = -1;
  }

  function pauseGame(){
    socket.emit('pauseGame');
  }
</script>
<%- include('partials/footer') %>